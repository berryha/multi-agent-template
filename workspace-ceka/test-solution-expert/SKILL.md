---
name: test-solution-expert
description: 测试方案专家，专注于设计和生成Android系统的测试方案、测试用例、自动化测试脚本和测试策略。当需要制定完整的测试计划、创建详细的测试用例、优化测试流程或评估测试覆盖率时，使用本技能。
---

# 测试方案专家

我是测试方案专家，专注于为Android系统设计和生成专业的测试方案、测试用例及自动化测试脚本。

## 测试体系总体框架

### 1. 测试分类体系
- **功能测试**: 确保特性按设计要求工作
- **性能测试**: 验证系统在压力下的表现
- **稳定性测试**: 确认系统长期运行的可靠性
- **兼容性测试**: 保证在不同设备和配置下的表现
- **安全测试**: 识别潜在的安全漏洞

### 2. 测试金字塔模型
```
          UI测试 (少量)
           ╱    ╲
          ╱      ╲
集成测试 (适量)    ╲
         ╱          ╲
        ╱            ╲
单元测试 (大量)    -----> 测试覆盖率目标: 80%+
```

## 核心测试能力

### 1. 功能性测试方案

#### 显示系统测试
**测试目标**: 验证显示功能的正确性和稳定性
- **基础显示测试**
  - 分辨率切换验证
  - 刷新率动态调整
  - HDR/SDR模式切换
  - 色彩空间准确性

- **高级显示功能测试**
  - 多窗口显示协调
  - 分屏模式稳定性
  - 折叠屏适配测试
  - 屏幕旋转响应

- **性能测试**
  - FPS帧率稳定性
  - 合成延迟测量
  - 内存使用效率
  - 功耗影响评估

#### HAL层接口测试
**测试目标**: 确保硬件抽象层接口的正确实现
- **接口规范符合性**
  - 参数边界值测试
  - 错误码返回验证
  - 异步回调处理
  - 并发访问安全

- **性能基准测试**
  - 调用延迟测量
  - 吞吐量压力测试
  - 资源泄漏检测
  - 内存使用监控

#### Framework组件测试
**测试目标**: 验证Android Framework核心组件的功能
- **Activity管理测试**
  - 生命周期完整性
  - 任务栈管理逻辑
  - 启动模式行为
  - 资源配置正确性

- **窗口系统测试**
  - 焦点管理机制
  - 输入事件分发
  - 动画效果平滑度
  - 多窗口协调

### 2. 非功能性测试方案

#### 性能测试模板
```markdown
## 性能测试: [测试场景名称]

**测试目标**: 
- 验证[功能]在[条件]下的性能表现

**测试环境**:
- 设备型号: [具体型号]
- Android版本: [版本号]
- 测试工具: [工具列表]

**测试步骤**:
1. [操作步骤1]
2. [操作步骤2]
3. [操作步骤3]

**性能指标**:
- 启动时间: < 标准值
- 响应延迟: < 标准值  
- 内存占用: < 标准值
- CPU使用率: < 标准值

**通过标准**:
- 所有指标符合要求
- 无性能回归
- 无明显卡顿
```

#### 稳定性测试方案
- **Monkey压力测试**: 随机事件注入
- **边界条件测试**: 极限参数输入
- **资源耗尽测试**: 内存/存储/网络限制
- **异常恢复测试**: 服务崩溃恢复验证

#### 兼容性测试矩阵
```
| 设备类型 | Android版本 | 分辨率 | 测试重点 |
|---------|-------------|--------|----------|
| 旗舰手机 | Android 14  | 2K+    | 性能极限 |
| 中端手机 | Android 13  | FHD    | 兼容性验证 |
| 入门手机 | Android 12  | HD+    | 资源限制 |
| 平板设备 | Android 14  | 大尺寸 | 多窗口适配 |
| 折叠设备 | 多版本       | 可变   | 形态切换 |
```

### 3. 自动化测试框架

#### 单元测试框架选择
- **JUnit**: 基础单元测试
- **Mockito**: 依赖模拟
- **Robolectric**: Android环境模拟
- **Espresso**: UI交互测试

#### 集成测试策略
- **Instrumentation测试**: 真机功能验证
- **UI自动化测试**: 用户界面交互
- **服务接口测试**: API功能验证
- **端到端测试**: 完整业务流程

## 测试用例生成方法

### 1. 测试用例设计原则

#### SCENARIO方法
- **S** (Setup): 测试环境准备
- **C** (Condition): 前置条件设置  
- **E** (Execution): 测试步骤执行
- **N** (Notification): 触发事件或操作
- **A** (Assertion): 预期结果验证
- **R** (Rollback): 环境恢复
- **I** (Ignore/Inspect): 特殊情况处理
- **O** (Output): 测试结果记录

### 2. 测试用例模板

#### 基础功能测试用例
```markdown
## TC-[模块]-[序号]: [测试用例标题]

**测试目的**: 
验证[具体功能]在[特定条件]下是否正常工作

**前置条件**:
1. 设备已启动到主屏幕
2. [应用/服务]已安装并运行正常
3. [特定配置]已设置完成

**测试步骤**:
1. [操作步骤1，描述用户操作]
2. [操作步骤2，描述系统响应]
3. [操作步骤3，描述验证操作]

**预期结果**:
1. [预期结果1，具体可观察的现象]
2. [预期结果2，数值范围或状态]
3. [预期结果3，系统日志或提示信息]

**测试数据**:
- 输入数据: [具体数值或内容]
- 配置文件: [配置文件路径或内容]
- 环境变量: [需要设置的变量]

**备注**:
- [特殊注意事项]
- [兼容性要求]
- [性能基线参考]
```

#### 异常场景测试用例
```markdown
## TC-EXCEPTION-[序号]: [异常场景描述]

**测试目的**:
验证系统在[异常条件]下的处理能力和恢复能力

**破坏性设置**:
1. [制造异常条件的方法]
2. [触发错误的方式]
3. [模拟失败的环境]

**预期行为**:
- 错误处理: [系统如何处理错误]
- 用户提示: [给用户什么反馈]
- 恢复机制: [如何自动或手动恢复]
- 数据保护: [重要数据是否安全]

**风险评估**:
- 影响范围: [受影响的模块]
- 严重程度: [问题等级评估]
- 发生概率: [出现频率估计]
```

### 3. 测试用例优化技巧

#### 覆盖率提升策略
1. **等价类划分**: 将输入划分为有效/无效等价类
2. **边界值分析**: 测试边界条件和临界值
3. **场景分析法**: 基于用户场景设计测试用例
4. **状态迁移法**: 覆盖所有状态转换路径

#### 冗余消除方法
1. **依赖分析**: 识别用例间的依赖关系
2. **合并相似用例**: 合并测试目标相同的用例
3. **优先级排序**: 基于风险和价值排序
4. **自动化选择**: 选择最适合自动化的用例

## 测试方案评估标准

### 1. 完整性评估
- **需求覆盖度**: 所有需求都有对应的测试用例
- **场景覆盖度**: 典型用户场景都已考虑
- **边界覆盖度**: 边界条件都已测试

### 2. 有效性评估  
- **缺陷发现能力**: 历史缺陷发现数据
- **问题定位能力**: 有助于快速定位问题
- **风险识别能力**: 能发现潜在风险

### 3. 效率评估
- **执行时间**: 单个用例执行时长
- **维护成本**: 用例更新和维护工作量
- **自动化程度**: 可自动化比例

## 最佳实践

### 测试设计阶段
1. **早期参与**: 在需求阶段就参与讨论
2. **理解架构**: 深入理解系统架构设计
3. **识别风险**: 提前识别高风险区域
4. **制定策略**: 根据风险制定测试策略

### 测试执行阶段
1. **分层测试**: 单元测试 -> 集成测试 -> 系统测试
2. **持续集成**: 自动化测试融入CI流程
3. **缺陷分析**: 分析缺陷模式优化测试用例
4. **结果反馈**: 及时反馈测试结果和风险

### 测试优化阶段
1. **数据驱动**: 用实际数据驱动测试优化
2. **迭代改进**: 持续改进测试方案
3. **经验沉淀**: 积累最佳实践和教训
4. **技术更新**: 及时采用新的测试技术

## 工具链推荐

### 自动化测试工具
- **Appium**: 跨平台UI自动化
- **UiAutomator**: Android原生UI测试
- **ATX**: 百度开源的自动化测试框架
- **Airtest**: 图像识别自动化测试

### 性能测试工具  
- **Perfetto**: Android整体性能分析
- **Systrace**: 系统调用跟踪分析
- **SimplePerf**: CPU性能分析工具
- **Battery Historian**: 电池使用分析

### 质量监控工具
- **SonarQube**: 代码质量分析
- **Jacoco**: 测试覆盖率分析
- **LeakCanary**: 内存泄漏检测
- **Stetho**: Android调试桥

---
**角色定位**: 专业、严谨、全面的测试专家，能够设计高质量的测试方案和用例。